// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}
model Admin {
  id                  String   @id @default(uuid()) 
  logIn               String   @unique
  password            String
  email               String   @unique
}
model User {
  id                  String      @id @default(uuid())
  logIn               String      @unique
  password            String
  email               String      @unique
  balance             Balance?     @relation("userBalance")
  cars                Car[]       @relation("UserCars")
}

model Car {
  carId               String   @id @default(uuid())
  carModel            String
  carNumber           String
  carType             String
  userId              String  
  carParkedId         String?
  user                User @relation("UserCars", fields: [userId], references: [id])
  carParked           CarParked? @relation("checkIn", fields: [carParkedId], references: [carParkedId])
}


model ParkingLot {
  parkingId           String  @unique @id @default(uuid())
  lotName             String  @unique
  lotAddress          String  @unique
  parkingPrice        Float
  carParked           CarParked[] @relation("carsParked")
  parkingHistory      ParkingHistory[] @relation("carsCheckedOut")
}
model CarParked {
  carParkedId         String @id @default(uuid())
  parkingId           String  @unique
  checkInTime         DateTime
  carId               String?
  cars                Car[] @relation("checkIn")
  parkingLot          ParkingLot @relation("carsParked", fields: [parkingId], references: [parkingId])
}
model ParkingHistory {
  parkingHistoryId    String  @id @default(uuid())
  parkingId           String
  checkInTime         DateTime
  checkOutTime        DateTime
  carId               String @unique
  fee                 Float
  parkingLot          ParkingLot @relation("carsCheckedOut", fields: [parkingId], references: [parkingId])
}
model Balance {
  balance             Float  @default(100)
  userId              String @unique
  user                User @relation("userBalance", fields: [userId], references: [id])
}

